!function(){"use strict";var t,e,n,s,o,i,c=chrome.storage.local;i=function(e){t()},e=function(t){var e;e=[],c.get("muted_sites",function(n){0!==Object.keys(n).length&&n.muted_sites.forEach(function(t){e.push(t)}),e.push(t),c.set({muted_sites:e},function(){})})},n=function(t){c.get("muted_sites",function(t){0!==Object.keys(t).length&&t.muted_sites.forEach(function(e,n,s){t.muted_sites.splice(n,1)}),c.set({muted_sites:t.muted_sites},function(){})})},o=function(t,e,n){var o,i,r;chrome.tabs.query({active:!0,currentWindow:!0},function(t){(o=t[0]).url&&(i=s(o.url),r=[],c.get("muted_sites",function(t){0!==Object.keys(t).length&&t.muted_sites.forEach(function(t){if(i==t)return chrome.tabs.update(o.id,{muted:!0}),chrome.browserAction.setIcon({path:"assets/icon48.png"}),void chrome.browserAction.setTitle({title:"This site is permanently muted."})})})),chrome.browserAction.setIcon({path:"assets/icon48-off.png"}),chrome.browserAction.setTitle({title:"This site is not permanently muted."})})},s=function(t){var e;return e=t.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i),null!=e&&e.length>2&&"string"==typeof e[2]&&e[2].length>0?e[2]:""},t=function(){var t,o;chrome.tabs.query({active:!0,currentWindow:!0},function(i){(t=i[0])&&(o=s(t.url),0==t.mutedInfo.muted?(chrome.tabs.update(t.id,{muted:!0}),e(o),chrome.browserAction.setIcon({path:"assets/icon48.png"}),chrome.browserAction.setTitle({title:"This site is permanently muted."})):(chrome.tabs.update(t.id,{muted:!1}),n(),chrome.browserAction.setIcon({path:"assets/icon48-off.png"}),chrome.browserAction.setTitle({title:"This site is not permanently muted."})))})},chrome.tabs.onActivated.addListener(o),chrome.tabs.onUpdated.addListener(o),chrome.browserAction.onClicked.addListener(i),document.addEventListener("DOMContentLoaded",void 0)}();